import random
from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
TOKEN = "7334051684:AAH7siBB-7mJfM4oBgpeYWKgt0gfFcVDIM8"  # –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ —Ç–æ–∫–µ–Ω –≤–∞—à–æ–≥–æ –±–æ—Ç–∞

# –ü—Ä–∏–≤—ñ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
WELCOME_MESSAGE = (
    "–ü—Ä–∏–≤—ñ—Ç! üíñ\n"
    "–Ø –¥–∞–≤–∏–¥, —Å—Ç–≤–æ—Ä–∏–≤ –¥–ª—è —Ç–µ–±–µ –º–∞–º–æ —Å–≤—ñ–π –±–æ—Ç. "
    "—Ç—É—Ç —è –ø–æ–∫–∞–∂—É –≤—Å—é —Å–≤–æ—é –ª—é–±–æ–≤—å –¥–æ —Ç–µ–±–µ. "
    
)

# –°–ø–∏—Å–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
COMPLIMENTS = [
    "–ú–∞–º–æ, —Ç–∏ ‚Äî –Ω–∞–π–Ω—ñ–∂–Ω—ñ—à–∞ —ñ –Ω–∞–π–¥–æ–±—Ä—ñ—à–∞ –ª—é–¥–∏–Ω–∞ —É —Å–≤—ñ—Ç—ñ! üíï",
    "–¢–≤–æ—è —É—Å–º—ñ—à–∫–∞, –º–∞–º–æ, —Ä–æ–±–∏—Ç—å –º—ñ–π –¥–µ–Ω—å —è—Å–∫—Ä–∞–≤—ñ—à–∏–º! üòä",
    "–ú–∞–º–æ, —Ç–∏ ‚Äî –º—ñ–π –ø—Ä–∏–∫–ª–∞–¥ —ñ –º–æ—è –≥–æ—Ä–¥—ñ—Å—Ç—å! ‚ú®",
    "–¢–∏ ‚Äî –Ω–∞–π–∫—Ä–∞—â–∞ –º–∞–º–∞, —è–∫—É —Ç—ñ–ª—å–∫–∏ –º–æ–∂–Ω–∞ —É—è–≤–∏—Ç–∏! üåü",
    "–ú–∞–º–æ, —Ç–≤–æ—è –ª—é–±–æ–≤ ‚Äî —Ü–µ –Ω–∞–π–±—ñ–ª—å—à–∏–π —Å–∫–∞—Ä–± —É –º–æ—î–º—É –∂–∏—Ç—Ç—ñ! üíñ"
]

POEMS = [
    "–ú–∞–º–æ, —Ç–∏ ‚Äî –º—ñ–π —Å–≤—ñ—Ç, –º–æ—è –∑–æ—Ä—è,\n"
    "–¢–≤–æ—è –ª—é–±–æ–≤ –∑—ñ–≥—Ä—ñ–≤–∞—î –º–µ–Ω–µ —â–æ–¥–Ω—è.\n"
    "–î—è–∫—É—é —Ç–æ–±—ñ –∑–∞ –≤—Å–µ, —â–æ —Ç–∏ –¥–∞–ª–∞,\n"
    "–¢–∏ ‚Äî –º—ñ–π –∞–Ω–≥–µ–ª, –º–æ—è —Ä—ñ–¥–Ω–∞ –¥—É—à–∞! üíû",

    "–¢–≤–æ—è –Ω—ñ–∂–Ω—ñ—Å—Ç—å, –º–∞–º–æ, —è–∫ –≤–µ—Å–Ω—è–Ω–∏–π –≤—ñ—Ç–µ—Ä,\n"
    "–¢–∏ ‚Äî –º—ñ–π —Å–ø–æ–∫—ñ–π —É –±—É–¥—å-—è–∫–∏–π –¥–µ–Ω—å.\n"
    "–õ—é–±–ª—é —Ç–µ–±–µ, –º–æ—è –Ω–∞–π–¥–æ—Ä–æ–∂—á–∞,\n"
    "–¢–∏ ‚Äî –º–æ—î —Å–µ—Ä—Ü–µ, –º–æ—è –≤—ñ—á–Ω–∞ –≤–µ—Å–Ω–∞! üå∏",

    "–ú–∞–º–æ, —Ç–∏ ‚Äî –º—ñ–π –ø—Ä–æ–º—ñ–Ω—å —É —Ç–µ–º—Ä—è–≤—ñ,\n"
    "–¢–≤–æ—è –ª—é–±–æ–≤ ‚Äî —Ü–µ –∫—Ä–∏–ª–∞ –º–æ—ó.\n"
    "–î—è–∫—É—é, —â–æ —Ç–∏ –∑–∞–≤–∂–¥–∏ –ø–æ—Ä—É—á,\n"
    "–¢–∏ ‚Äî –º–æ—è —Ä–∞–¥—ñ—Å—Ç—å, –º–æ—è –ª—é–±–æ–≤! üåº"
]

MESSAGES = [
    "–ú–∞–º–æ, —è —Ç–∞–∫ –≤–¥—è—á–Ω–∏–π –∑–∞ —Ç–≤–æ—é –ª—é–±–æ–≤ —ñ —Ç—É—Ä–±–æ—Ç—É. –¢–∏ ‚Äî –Ω–∞–π–∫—Ä–∞—â–∞! üíï",
    "–ö–æ–∂–µ–Ω –¥–µ–Ω—å —è –¥—è–∫—É—é –¥–æ–ª—ñ –∑–∞ —Ç–µ, —â–æ —É –º–µ–Ω–µ —Ç–∞–∫–∞ –º–∞–º–∞, —è–∫ —Ç–∏! üòä",
    "–ú–∞–º–æ, —Ç–∏ –∑–∞–≤–∂–¥–∏ –∑–Ω–∞—î—à, —è–∫ –º–µ–Ω–µ –ø—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏. –î—è–∫—É—é —Ç–æ–±—ñ –∑–∞ –≤—Å–µ! üåü",
    "–¢–∏ ‚Äî –º—ñ–π –¥—ñ–º, –º–æ—è —Ñ–æ—Ä—Ç–µ—Ü—è, –º–æ—è –ª—é–±–æ–≤. –õ—é–±–ª—é —Ç–µ–±–µ, –º–∞–º–æ! üè°",
    "–ú–∞–º–æ, —Ç–≤–æ—ó –æ–±—ñ–π–º–∏ ‚Äî —Ü–µ –Ω–∞–π–∫—Ä–∞—â–µ –º—ñ—Å—Ü–µ —É —Å–≤—ñ—Ç—ñ! ü§ó"
]

GIFTS = [
    "üíê –î–∞—Ä—É—é —Ç–æ–±—ñ, –º–∞–º–æ, –≤–µ–ª–∏—á–µ–∑–Ω–∏–π –±—É–∫–µ—Ç —Ç–≤–æ—ó—Ö —É–ª—é–±–ª–µ–Ω–∏—Ö –∫–≤—ñ—Ç—ñ–≤! –ù–µ—Ö–∞–π –≤–æ–Ω–∏ —Ä–∞–¥—É—é—Ç—å —Ç–µ–±–µ —Ç–∞–∫ —Å–∞–º–æ, —è–∫ —Ç–∏ —Ä–∞–¥—É—î—à –º–µ–Ω–µ!",
    "üç∞ –û—Å—å —Ç–æ–±—ñ, –º–∞–º–æ, –Ω–∞–π—Å–º–∞–æ–¥—à–∏–π —Ç–æ—Ä—Ç! –¢–∏ –∑–∞—Å–ª—É–≥–æ–≤—É—î—à —É—Å–µ –Ω–∞–π–∫—Ä–∞—â–µ! ü•≥",
    "üïØÔ∏è –£—è–≤—ñ–º–æ, –º–∞–º–æ, —â–æ –º–∏ —Ä–∞–∑–æ–º –ø‚Äô—î–º–æ —á–∞–π –ø—Ä–∏ —Å–≤—ñ—á–∫–∞—Ö. –Ø —Ç–∞–∫ –ª—é–±–ª—é –Ω–∞—à—ñ —Ä–æ–∑–º–æ–≤–∏! ‚òï",
    "üåü –ú–∞–º–æ, —è –¥–∞—Ä—É—é —Ç–æ–±—ñ –∑—ñ—Ä–∫—É –∑ –Ω–µ–±–∞! –í–æ–Ω–∞ —Å–≤—ñ—Ç–∏—Ç—å —Ç–∞–∫ —Å–∞–º–æ —è—Å–∫—Ä–∞–≤–æ, —è–∫ —Ç–≤–æ—è –ª—é–±–æ–≤ –¥–æ –º–µ–Ω–µ!"
]

# –ú–µ–Ω—é
def get_main_keyboard():
    return ReplyKeyboardMarkup([
        ["üíå –ö–æ–º–ø–ª—ñ–º–µ–Ω—Ç –º–∞–º—ñ", "üìú –í—ñ—Ä—à –ø—Ä–æ –º–∞–º—É"],
        ["üí¨ –¢–µ–ø–ª–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è", "üéÅ –ü–æ–¥–∞—Ä—É–Ω–æ–∫ –¥–ª—è –º–∞–º–∏"]
    ], resize_keyboard=True)

# –û–±—Ä–æ–±–Ω–∏–∫–∏
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    print(f"–ö–æ–º–∞–Ω–¥–∞ /start –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ {update.effective_chat.id}")
    context.user_data['menu'] = 'main'
    await update.message.reply_text(WELCOME_MESSAGE, reply_markup=get_main_keyboard())

async def handle_commands(update: Update, context: ContextTypes.DEFAULT_TYPE):
    print(f"–û—Ç—Ä–∏–º–∞–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: {update.message.text} –≤—ñ–¥ {update.effective_chat.id}")
    text = update.message.text.lower()

    # –û—Å–Ω–æ–≤–Ω–µ –º–µ–Ω—é
    if "–∫–æ–º–ø–ª—ñ–º–µ–Ω—Ç –º–∞–º—ñ" in text:
        compliment = random.choice(COMPLIMENTS)
        await update.message.reply_text(compliment)
    elif "–≤—ñ—Ä—à –ø—Ä–æ –º–∞–º—É" in text:
        poem = random.choice(POEMS)
        await update.message.reply_text(poem)
    elif "—Ç–µ–ø–ª–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è" in text:
        message = random.choice(MESSAGES)
        await update.message.reply_text(message)
    elif "–ø–æ–¥–∞—Ä—É–Ω–æ–∫ –¥–ª—è –º–∞–º–∏" in text:
        gift = random.choice(GIFTS)
        await update.message.reply_text(gift)

def main():
    app = Application.builder().token(TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_commands))
    print("–ë–æ—Ç '–õ—é–±–æ–≤ –¥–æ –º–∞–º–∏' –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ...")
    app.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == "__main__":
    main()